if(typeof module!=="undefined"&&typeof exports!=="undefined"&&module.exports===exports){module.exports="ui.router";}(function(window,angular,undefined){var isDefined=angular.isDefined,isFunction=angular.isFunction,isString=angular.isString,isObject=angular.isObject,isArray=angular.isArray,forEach=angular.forEach,extend=angular.extend,copy=angular.copy;function inherit(parent,extra){return extend(new (extend(function(){},{prototype:parent}))(),extra);}function merge(dst){forEach(arguments,function(obj){if(obj!==dst){forEach(obj,function(value,key){if(!dst.hasOwnProperty(key)){dst[key]=value;}});}});return dst;}function ancestors(first,second){var path=[];for(var n in first.path){if(first.path[n]!==second.path[n]){break;}path.push(first.path[n]);}return path;}function keys(object){if(Object.keys){return Object.keys(object);}var result=[];angular.forEach(object,function(val,key){result.push(key);});return result;}function arraySearch(array,value){if(Array.prototype.indexOf){return array.indexOf(value,Number(arguments[2])||0);}var len=array.length>>>0,from=Number(arguments[2])||0;from=(from<0)?Math.ceil(from):Math.floor(from);if(from<0){from+=len;}for(;from<len;from++){if(from in array&&array[from]===value){return from;}}return -1;}function inheritParams(currentParams,newParams,$current,$to){var parents=ancestors($current,$to),parentParams,inherited={},inheritList=[];for(var i in parents){if(!parents[i].params||!parents[i].params.length){continue;}parentParams=parents[i].params;for(var j in parentParams){if(arraySearch(inheritList,parentParams[j])>=0){continue;}inheritList.push(parentParams[j]);inherited[parentParams[j]]=currentParams[parentParams[j]];}}return extend({},inherited,newParams);}function normalize(keys,values){var normalized={};forEach(keys,function(name){var value=values[name];normalized[name]=(value!=null)?String(value):null;});return normalized;}function equalForKeys(a,b,keys){if(!keys){keys=[];for(var n in a){keys.push(n);}}for(var i=0;i<keys.length;i++){var k=keys[i];if(a[k]!=b[k]){return false;}}return true;}function filterByKeys(keys,values){var filtered={};forEach(keys,function(name){filtered[name]=values[name];});return filtered;}angular.module("ui.router.util",["ng"]);angular.module("ui.router.router",["ui.router.util"]);angular.module("ui.router.state",["ui.router.router","ui.router.util"]);angular.module("ui.router",["ui.router.state"]);angular.module("ui.router.compat",["ui.router"]);$Resolve.$inject=["$q","$injector"];function $Resolve($q,$injector){var VISIT_IN_PROGRESS=1,VISIT_DONE=2,NOTHING={},NO_DEPENDENCIES=[],NO_LOCALS=NOTHING,NO_PARENT=extend($q.when(NOTHING),{$$promises:NOTHING,$$values:NOTHING});this.study=function(invocables){if(!isObject(invocables)){throw new Error("'invocables' must be an object");}var plan=[],cycle=[],visited={};function visit(value,key){if(visited[key]===VISIT_DONE){return;}cycle.push(key);if(visited[key]===VISIT_IN_PROGRESS){cycle.splice(0,cycle.indexOf(key));throw new Error("Cyclic dependency: "+cycle.join(" -> "));}visited[key]=VISIT_IN_PROGRESS;if(isString(value)){plan.push(key,[function(){return $injector.get(value);}],NO_DEPENDENCIES);}else{var params=$injector.annotate(value);forEach(params,function(param){if(param!==key&&invocables.hasOwnProperty(param)){visit(invocables[param],param);}});plan.push(key,value,params);}cycle.pop();visited[key]=VISIT_DONE;}forEach(invocables,visit);invocables=cycle=visited=null;function isResolve(value){return isObject(value)&&value.then&&value.$$promises;}return function(locals,parent,self){if(isResolve(locals)&&self===undefined){self=parent;parent=locals;locals=null;}if(!locals){locals=NO_LOCALS;}else{if(!isObject(locals)){throw new Error("'locals' must be an object");}}if(!parent){parent=NO_PARENT;}else{if(!isResolve(parent)){throw new Error("'parent' must be a promise returned by $resolve.resolve()");}}var resolution=$q.defer(),result=resolution.promise,promises=result.$$promises={},values=extend({},locals),wait=1+plan.length/3,merged=false;function done(){if(!--wait){if(!merged){merge(values,parent.$$values);}result.$$values=values;result.$$promises=true;resolution.resolve(values);}}function fail(reason){result.$$failure=reason;resolution.reject(reason);}if(isDefined(parent.$$failure)){fail(parent.$$failure);return result;}if(parent.$$values){merged=merge(values,parent.$$values);done();}else{extend(promises,parent.$$promises);parent.then(done,fail);}for(var i=0,ii=plan.length;i<ii;i+=3){if(locals.hasOwnProperty(plan[i])){done();}else{invoke(plan[i],plan[i+1],plan[i+2]);}}function invoke(key,invocable,params){var invocation=$q.defer(),waitParams=0;function onfailure(reason){invocation.reject(reason);fail(reason);}forEach(params,function(dep){if(promises.hasOwnProperty(dep)&&!locals.hasOwnProperty(dep)){waitParams++;promises[dep].then(function(result){values[dep]=result;if(!(--waitParams)){proceed();}},onfailure);}});if(!waitParams){proceed();}function proceed(){if(isDefined(result.$$failure)){return;}try{invocation.resolve($injector.invoke(invocable,self,values));invocation.promise.then(function(result){values[key]=result;done();},onfailure);}catch(e){onfailure(e);}}promises[key]=invocation.promise;}return result;};};this.resolve=function(invocables,locals,parent,self){return this.study(invocables)(locals,parent,self);};}angular.module("ui.router.util").service("$resolve",$Resolve);$TemplateFactory.$inject=["$http","$templateCache","$injector"];function $TemplateFactory($http,$templateCache,$injector){this.fromConfig=function(config,params,locals){return(isDefined(config.template)?this.fromString(config.template,params):isDefined(config.templateUrl)?this.fromUrl(config.templateUrl,params):isDefined(config.templateProvider)?this.fromProvider(config.templateProvider,params,locals):null);};this.fromString=function(template,params){return isFunction(template)?template(params):template;};this.fromUrl=function(url,params){if(isFunction(url)){url=url(params);}if(url==null){return null;}else{return $http.get(url,{cache:$templateCache}).then(function(response){return response.data;});}};this.fromProvider=function(provider,params,locals){return $injector.invoke(provider,null,locals||{params:params});};}angular.module("ui.router.util").service("$templateFactory",$TemplateFactory);function UrlMatcher(pattern){var placeholder=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,names={},compiled="^",last=0,m,segments=this.segments=[],params=this.params=[];function addParameter(id){if(!/^\w+(-+\w+)*$/.test(id)){throw new Error("Invalid parameter name '"+id+"' in pattern '"+pattern+"'");}if(names[id]){throw new Error("Duplicate parameter name '"+id+"' in pattern '"+pattern+"'");}names[id]=true;params.push(id);}function quoteRegExp(string){return string.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");}this.source=pattern;var id,regexp,segment;while((m=placeholder.exec(pattern))){id=m[2]||m[3];regexp=m[4]||(m[1]=="*"?".*":"[^/]*");segment=pattern.substring(last,m.index);if(segment.indexOf("?")>=0){break;}compiled+=quoteRegExp(segment)+"("+regexp+")";addParameter(id);segments.push(segment);last=placeholder.lastIndex;}segment=pattern.substring(last);var i=segment.indexOf("?");if(i>=0){var search=this.sourceSearch=segment.substring(i);segment=segment.substring(0,i);this.sourcePath=pattern.substring(0,last+i);forEach(search.substring(1).split(/[&?]/),addParameter);}else{this.sourcePath=pattern;this.sourceSearch="";}compiled+=quoteRegExp(segment)+"$";segments.push(segment);this.regexp=new RegExp(compiled);this.prefix=segments[0];}UrlMatcher.prototype.concat=function(pattern){return new UrlMatcher(this.sourcePath+pattern+this.sourceSearch);};UrlMatcher.prototype.toString=function(){return this.source;};UrlMatcher.prototype.exec=function(path,searchParams){var m=this.regexp.exec(path);if(!m){return null;}var params=this.params,nTotal=params.length,nPath=this.segments.length-1,values={},i;if(nPath!==m.length-1){throw new Error("Unbalanced capture group in route '"+this.source+"'");}for(i=0;i<nPath;i++){values[params[i]]=m[i+1];}for(;i<nTotal;i++){values[params[i]]=searchParams[params[i]];}return values;};UrlMatcher.prototype.parameters=function(){return this.params;};UrlMatcher.prototype.format=function(values){var segments=this.segments,params=this.params;if(!values){return segments.join("");}var nPath=segments.length-1,nTotal=params.length,result=segments[0],i,search,value;for(i=0;i<nPath;i++){value=values[params[i]];if(value!=null){result+=encodeURIComponent(value);}result+=segments[i+1];}for(;i<nTotal;i++){value=values[params[i]];if(value!=null){result+=(search?"&":"?")+params[i]+"="+encodeURIComponent(value);search=true;}}return result;};function $UrlMatcherFactory(){this.compile=function(pattern){return new UrlMatcher(pattern);};this.isMatcher=function(o){return isObject(o)&&isFunction(o.exec)&&isFunction(o.format)&&isFunction(o.concat);};this.$get=function(){return this;};}angular.module("ui.router.util").provider("$urlMatcherFactory",$UrlMatcherFactory);$UrlRouterProvider.$inject=["$urlMatcherFactoryProvider"];function $UrlRouterProvider($urlMatcherFactory){var rules=[],otherwise=null;function regExpPrefix(re){var prefix=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(re.source);return(prefix!=null)?prefix[1].replace(/\\(.)/g,"$1"):"";}function interpolate(pattern,match){return pattern.replace(/\$(\$|\d{1,2})/,function(m,what){return match[what==="$"?0:Number(what)];});}this.rule=function(rule){if(!isFunction(rule)){throw new Error("'rule' must be a function");}rules.push(rule);return this;};this.otherwise=function(rule){if(isString(rule)){var redirect=rule;rule=function(){return redirect;};}else{if(!isFunction(rule)){throw new Error("'rule' must be a function");}}otherwise=rule;return this;};function handleIfMatch($injector,handler,match){if(!match){return false;}var result=$injector.invoke(handler,handler,{$match:match});return isDefined(result)?result:true;}this.when=function(what,handler){var redirect,handlerIsString=isString(handler);if(isString(what)){what=$urlMatcherFactory.compile(what);}if(!handlerIsString&&!isFunction(handler)&&!isArray(handler)){throw new Error("invalid 'handler' in when()");}var strategies={matcher:function(what,handler){if(handlerIsString){redirect=$urlMatcherFactory.compile(handler);handler=["$match",function($match){return redirect.format($match);}];}return extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path(),$location.search()));},{prefix:isString(what.prefix)?what.prefix:""});},regex:function(what,handler){if(what.global||what.sticky){throw new Error("when() RegExp must not be global or sticky");}if(handlerIsString){redirect=handler;handler=["$match",function($match){return interpolate(redirect,$match);}];}return extend(function($injector,$location){return handleIfMatch($injector,handler,what.exec($location.path()));},{prefix:regExpPrefix(what)});}};var check={matcher:$urlMatcherFactory.isMatcher(what),regex:what instanceof RegExp};for(var n in check){if(check[n]){return this.rule(strategies[n](what,handler));}}throw new Error("invalid 'what' in when()");};this.$get=["$location","$rootScope","$injector",function($location,$rootScope,$injector){function update(evt){if(evt&&evt.defaultPrevented){return;}function check(rule){var handled=rule($injector,$location);if(handled){if(isString(handled)){$location.replace().url(handled);}return true;}return false;}var n=rules.length,i;for(i=0;i<n;i++){if(check(rules[i])){return;}}if(otherwise){check(otherwise);}}$rootScope.$on("$locationChangeSuccess",update);return{sync:function(){update();}};}];}angular.module("ui.router.router").provider("$urlRouter",$UrlRouterProvider);$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"];function $StateProvider($urlRouterProvider,$urlMatcherFactory,$locationProvider){var root,states={},$state,queue={},abstractKey="abstract";var stateBuilder={parent:function(state){if(isDefined(state.parent)&&state.parent){return findState(state.parent);}var compositeName=/^(.+)\.[^.]+$/.exec(state.name);return compositeName?findState(compositeName[1]):root;},data:function(state){if(state.parent&&state.parent.data){state.data=state.self.data=extend({},state.parent.data,state.data);}return state.data;},url:function(state){var url=state.url;if(isString(url)){if(url.charAt(0)=="^"){return $urlMatcherFactory.compile(url.substring(1));}return(state.parent.navigable||root).url.concat(url);}if($urlMatcherFactory.isMatcher(url)||url==null){return url;}throw new Error("Invalid url '"+url+"' in state '"+state+"'");},navigable:function(state){return state.url?state:(state.parent?state.parent.navigable:null);},params:function(state){if(!state.params){return state.url?state.url.parameters():state.parent.params;}if(!isArray(state.params)){throw new Error("Invalid params in state '"+state+"'");}if(state.url){throw new Error("Both params and url specicified in state '"+state+"'");}return state.params;},views:function(state){var views={};forEach(isDefined(state.views)?state.views:{"":state},function(view,name){if(name.indexOf("@")<0){name+="@"+state.parent.name;}views[name]=view;});return views;},ownParams:function(state){if(!state.parent){return state.params;}var paramNames={};forEach(state.params,function(p){paramNames[p]=true;});forEach(state.parent.params,function(p){if(!paramNames[p]){throw new Error("Missing required parameter '"+p+"' in state '"+state.name+"'");}paramNames[p]=false;});var ownParams=[];forEach(paramNames,function(own,p){if(own){ownParams.push(p);}});return ownParams;},path:function(state){return state.parent?state.parent.path.concat(state):[];},includes:function(state){var includes=state.parent?extend({},state.parent.includes):{};includes[state.name]=true;return includes;},$delegates:{}};function isRelative(stateName){return stateName.indexOf(".")===0||stateName.indexOf("^")===0;}function findState(stateOrName,base){var isStr=isString(stateOrName),name=isStr?stateOrName:stateOrName.name,path=isRelative(name);if(path){if(!base){throw new Error("No reference point given for path '"+name+"'");}var rel=name.split("."),i=0,pathLength=rel.length,current=base;for(;i<pathLength;i++){if(rel[i]===""&&i===0){current=base;continue;}if(rel[i]==="^"){if(!current.parent){throw new Error("Path '"+name+"' not valid for state '"+base.name+"'");}current=current.parent;continue;}break;}rel=rel.slice(i).join(".");name=current.name+(current.name&&rel?".":"")+rel;}var state=states[name];if(state&&(isStr||(!isStr&&(state===stateOrName||state.self===stateOrName)))){return state;}return undefined;}function queueState(parentName,state){if(!queue[parentName]){queue[parentName]=[];}queue[parentName].push(state);}function registerState(state){state=inherit(state,{self:state,resolve:state.resolve||{},toString:function(){return this.name;}});var name=state.name;if(!isString(name)||name.indexOf("@")>=0){throw new Error("State must have a valid name");}if(states.hasOwnProperty(name)){throw new Error("State '"+name+"'' is already defined");}var parentName=(name.indexOf(".")!==-1)?name.substring(0,name.lastIndexOf(".")):(isString(state.parent))?state.parent:"";if(parentName&&!states[parentName]){return queueState(parentName,state.self);}for(var key in stateBuilder){if(isFunction(stateBuilder[key])){state[key]=stateBuilder[key](state,stateBuilder.$delegates[key]);}}states[name]=state;if(!state[abstractKey]&&state.url){$urlRouterProvider.when(state.url,["$match","$stateParams",function($match,$stateParams){if($state.$current.navigable!=state||!equalForKeys($match,$stateParams)){$state.transitionTo(state,$match,{location:false});}}]);}if(queue[name]){for(var i=0;i<queue[name].length;i++){registerState(queue[name][i]);}}return state;}function isGlob(text){return text.indexOf("*")>-1;}function doesStateMatchGlob(glob){var globSegments=glob.split("."),segments=$state.$current.name.split(".");if(globSegments[0]==="**"){segments=segments.slice(segments.indexOf(globSegments[1]));segments.unshift("**");}if(globSegments[globSegments.length-1]==="**"){segments.splice(segments.indexOf(globSegments[globSegments.length-2])+1,Number.MAX_VALUE);segments.push("**");}if(globSegments.length!=segments.length){return false;}for(var i=0,l=globSegments.length;i<l;i++){if(globSegments[i]==="*"){segments[i]="*";}}return segments.join("")===globSegments.join("");}root=registerState({name:"",url:"^",views:null,"abstract":true});root.navigable=null;this.decorator=decorator;function decorator(name,func){if(isString(name)&&!isDefined(func)){return stateBuilder[name];}if(!isFunction(func)||!isString(name)){return this;}if(stateBuilder[name]&&!stateBuilder.$delegates[name]){stateBuilder.$delegates[name]=stateBuilder[name];}stateBuilder[name]=func;return this;}this.state=state;function state(name,definition){if(isObject(name)){definition=name;}else{definition.name=name;}registerState(definition);return this;}this.$get=$get;$get.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter","$browser"];function $get($rootScope,$q,$view,$injector,$resolve,$stateParams,$location,$urlRouter,$browser){var TransitionSuperseded=$q.reject(new Error("transition superseded"));var TransitionPrevented=$q.reject(new Error("transition prevented"));var TransitionAborted=$q.reject(new Error("transition aborted"));var TransitionFailed=$q.reject(new Error("transition failed"));var currentLocation=$location.url();var baseHref=$browser.baseHref();function syncUrl(){if($location.url()!==currentLocation){$location.url(currentLocation);$location.replace();}}root.locals={resolve:null,globals:{$stateParams:{}}};$state={params:{},current:root.self,$current:root,transition:null};$state.reload=function reload(){$state.transitionTo($state.current,$stateParams,{reload:true,inherit:false,notify:false});};$state.go=function go(to,params,options){return this.transitionTo(to,params,extend({inherit:true,relative:$state.$current},options));};$state.transitionTo=function transitionTo(to,toParams,options){toParams=toParams||{};options=extend({location:true,inherit:false,relative:null,notify:true,reload:false,$retry:false},options||{});var from=$state.$current,fromParams=$state.params,fromPath=from.path;var evt,toState=findState(to,options.relative);if(!isDefined(toState)){var redirect={to:to,toParams:toParams,options:options};evt=$rootScope.$broadcast("$stateNotFound",redirect,from.self,fromParams);if(evt.defaultPrevented){syncUrl();return TransitionAborted;}if(evt.retry){if(options.$retry){syncUrl();return TransitionFailed;}var retryTransition=$state.transition=$q.when(evt.retry);retryTransition.then(function(){if(retryTransition!==$state.transition){return TransitionSuperseded;}redirect.options.$retry=true;return $state.transitionTo(redirect.to,redirect.toParams,redirect.options);},function(){return TransitionAborted;});syncUrl();return retryTransition;}to=redirect.to;toParams=redirect.toParams;options=redirect.options;toState=findState(to,options.relative);if(!isDefined(toState)){if(options.relative){throw new Error("Could not resolve '"+to+"' from state '"+options.relative+"'");}throw new Error("No such state '"+to+"'");}}if(toState[abstractKey]){throw new Error("Cannot transition to abstract state '"+to+"'");}if(options.inherit){toParams=inheritParams($stateParams,toParams||{},$state.$current,toState);}to=toState;var toPath=to.path;var keep,state,locals=root.locals,toLocals=[];for(keep=0,state=toPath[keep];state&&state===fromPath[keep]&&equalForKeys(toParams,fromParams,state.ownParams)&&!options.reload;keep++,state=toPath[keep]){locals=toLocals[keep]=state.locals;}if(shouldTriggerReload(to,from,locals,options)){if(to.self.reloadOnSearch!==false){syncUrl();}$state.transition=null;return $q.when($state.current);}toParams=normalize(to.params,toParams||{});if(options.notify){evt=$rootScope.$broadcast("$stateChangeStart",to.self,toParams,from.self,fromParams);if(evt.defaultPrevented){syncUrl();return TransitionPrevented;}}var resolved=$q.when(locals);for(var l=keep;l<toPath.length;l++,state=toPath[l]){locals=toLocals[l]=inherit(locals);resolved=resolveState(state,toParams,state===to,resolved,locals);}var transition=$state.transition=resolved.then(function(){var l,entering,exiting;if($state.transition!==transition){return TransitionSuperseded;}for(l=fromPath.length-1;l>=keep;l--){exiting=fromPath[l];if(exiting.self.onExit){$injector.invoke(exiting.self.onExit,exiting.self,exiting.locals.globals);}exiting.locals=null;}for(l=keep;l<toPath.length;l++){entering=toPath[l];entering.locals=toLocals[l];if(entering.self.onEnter){$injector.invoke(entering.self.onEnter,entering.self,entering.locals.globals);}}if($state.transition!==transition){return TransitionSuperseded;}$state.$current=to;$state.current=to.self;$state.params=toParams;copy($state.params,$stateParams);$state.transition=null;var toNav=to.navigable;if(options.location&&toNav){$location.url(toNav.url.format(toNav.locals.globals.$stateParams));if(options.location==="replace"){$location.replace();}}if(options.notify){$rootScope.$broadcast("$stateChangeSuccess",to.self,toParams,from.self,fromParams);}currentLocation=$location.url();return $state.current;},function(error){if($state.transition!==transition){return TransitionSuperseded;}$state.transition=null;$rootScope.$broadcast("$stateChangeError",to.self,toParams,from.self,fromParams,error);syncUrl();return $q.reject(error);});return transition;};$state.is=function is(stateOrName,params){var state=findState(stateOrName);if(!isDefined(state)){return undefined;}if($state.$current!==state){return false;}return isDefined(params)&&params!==null?angular.equals($stateParams,params):true;};$state.includes=function includes(stateOrName,params){if(isString(stateOrName)&&isGlob(stateOrName)){if(doesStateMatchGlob(stateOrName)){stateOrName=$state.$current.name;}else{return false;}}var state=findState(stateOrName);if(!isDefined(state)){return undefined;}if(!isDefined($state.$current.includes[state.name])){return false;}var validParams=true;angular.forEach(params,function(value,key){if(!isDefined($stateParams[key])||$stateParams[key]!==value){validParams=false;}});return validParams;};$state.href=function href(stateOrName,params,options){options=extend({lossy:true,inherit:false,absolute:false,relative:$state.$current},options||{});var state=findState(stateOrName,options.relative);if(!isDefined(state)){return null;}params=inheritParams($stateParams,params||{},$state.$current,state);var nav=(state&&options.lossy)?state.navigable:state;var url=(nav&&nav.url)?nav.url.format(normalize(state.params,params||{})):null;if(!$locationProvider.html5Mode()&&url){url="#"+$locationProvider.hashPrefix()+url;}if(baseHref!=="/"){if($locationProvider.html5Mode()){url=baseHref.slice(0,-1)+url;}else{if(options.absolute){url=baseHref.slice(1)+url;}}}if(options.absolute&&url){url=$location.protocol()+"://"+$location.host()+($location.port()==80||$location.port()==443?"":":"+$location.port())+(!$locationProvider.html5Mode()&&url?"/":"")+url;}return url;};$state.get=function(stateOrName,context){if(!isDefined(stateOrName)){var list=[];forEach(states,function(state){list.push(state.self);});return list;}var state=findState(stateOrName,context);return(state&&state.self)?state.self:null;};function resolveState(state,params,paramsAreFiltered,inherited,dst){var $stateParams=(paramsAreFiltered)?params:filterByKeys(state.params,params);var locals={$stateParams:$stateParams};dst.resolve=$resolve.resolve(state.resolve,locals,dst.resolve,state);var promises=[dst.resolve.then(function(globals){dst.globals=globals;})];if(inherited){promises.push(inherited);}forEach(state.views,function(view,name){var injectables=(view.resolve&&view.resolve!==state.resolve?view.resolve:{});injectables.$template=[function(){return $view.load(name,{view:view,locals:locals,params:$stateParams,notify:false})||"";}];promises.push($resolve.resolve(injectables,locals,dst.resolve,state).then(function(result){if(isFunction(view.controllerProvider)||isArray(view.controllerProvider)){var injectLocals=angular.extend({},injectables,locals);result.$$controller=$injector.invoke(view.controllerProvider,null,injectLocals);}else{result.$$controller=view.controller;}result.$$state=state;result.$$controllerAs=view.controllerAs;dst[name]=result;}));});return $q.all(promises).then(function(values){return dst;});}return $state;}function shouldTriggerReload(to,from,locals,options){if(to===from&&((locals===from.locals&&!options.reload)||(to.self.reloadOnSearch===false))){return true;}}}angular.module("ui.router.state").value("$stateParams",{}).provider("$state",$StateProvider);$ViewProvider.$inject=[];function $ViewProvider(){this.$get=$get;$get.$inject=["$rootScope","$templateFactory"];function $get($rootScope,$templateFactory){return{load:function load(name,options){var result,defaults={template:null,controller:null,view:null,locals:null,notify:true,async:true,params:{}};options=extend(defaults,options);if(options.view){result=$templateFactory.fromConfig(options.view,options.params,options.locals);}if(result&&options.notify){$rootScope.$broadcast("$viewContentLoading",options);}return result;}};}}angular.module("ui.router.state").provider("$view",$ViewProvider);function $ViewScrollProvider(){var useAnchorScroll=false;this.useAnchorScroll=function(){useAnchorScroll=true;};this.$get=["$anchorScroll","$timeout",function($anchorScroll,$timeout){if(useAnchorScroll){return $anchorScroll;}return function($element){$timeout(function(){$element[0].scrollIntoView();},0,false);};}];}angular.module("ui.router.state").provider("$uiViewScroll",$ViewScrollProvider);$ViewDirective.$inject=["$state","$injector","$uiViewScroll"];function $ViewDirective($state,$injector,$uiViewScroll){function getService(){return($injector.has)?function(service){return $injector.has(service)?$injector.get(service):null;}:function(service){try{return $injector.get(service);}catch(e){return null;}};}var service=getService(),$animator=service("$animator"),$animate=service("$animate");function getRenderer(attrs,scope){var statics=function(){return{enter:function(element,target,cb){target.after(element);cb();},leave:function(element,cb){element.remove();cb();}};};if($animate){return{enter:function(element,target,cb){$animate.enter(element,null,target,cb);},leave:function(element,cb){$animate.leave(element,cb);}};}if($animator){var animate=$animator&&$animator(scope,attrs);return{enter:function(element,target,cb){animate.enter(element,null,target);cb();},leave:function(element,cb){animate.leave(element);cb();}};}return statics();}var directive={restrict:"ECA",terminal:true,priority:400,transclude:"element",compile:function(tElement,tAttrs,$transclude){return function(scope,$element,attrs){var previousEl,currentEl,currentScope,latestLocals,onloadExp=attrs.onload||"",autoScrollExp=attrs.autoscroll,renderer=getRenderer(attrs,scope);scope.$on("$stateChangeSuccess",function(){updateView(false);});scope.$on("$viewContentLoading",function(){updateView(false);});updateView(true);function cleanupLastView(){if(previousEl){previousEl.remove();previousEl=null;}if(currentScope){currentScope.$destroy();currentScope=null;}if(currentEl){renderer.leave(currentEl,function(){previousEl=null;});previousEl=currentEl;currentEl=null;}}function updateView(firstTime){var newScope=scope.$new(),name=currentEl&&currentEl.data("$uiViewName"),previousLocals=name&&$state.$current&&$state.$current.locals[name];if(!firstTime&&previousLocals===latestLocals){return;}var clone=$transclude(newScope,function(clone){renderer.enter(clone,$element,function onUiViewEnter(){if(angular.isDefined(autoScrollExp)&&!autoScrollExp||scope.$eval(autoScrollExp)){$uiViewScroll(clone);}});cleanupLastView();});latestLocals=$state.$current.locals[clone.data("$uiViewName")];currentEl=clone;currentScope=newScope;currentScope.$emit("$viewContentLoaded");currentScope.$eval(onloadExp);}};}};return directive;}$ViewDirectiveFill.$inject=["$compile","$controller","$state"];function $ViewDirectiveFill($compile,$controller,$state){return{restrict:"ECA",priority:-400,compile:function(tElement){var initial=tElement.html();return function(scope,$element,attrs){var name=attrs.uiView||attrs.name||"",inherited=$element.inheritedData("$uiView");if(name.indexOf("@")<0){name=name+"@"+(inherited?inherited.state.name:"");}$element.data("$uiViewName",name);var current=$state.$current,locals=current&&current.locals[name];if(!locals){return;}$element.data("$uiView",{name:name,state:locals.$$state});$element.html(locals.$template?locals.$template:initial);var link=$compile($element.contents());if(locals.$$controller){locals.$scope=scope;var controller=$controller(locals.$$controller,locals);if(locals.$$controllerAs){scope[locals.$$controllerAs]=controller;}$element.data("$ngControllerController",controller);$element.children().data("$ngControllerController",controller);}link(scope);};}};}angular.module("ui.router.state").directive("uiView",$ViewDirective);angular.module("ui.router.state").directive("uiView",$ViewDirectiveFill);function parseStateRef(ref){var parsed=ref.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!parsed||parsed.length!==4){throw new Error("Invalid state ref '"+ref+"'");}return{state:parsed[1],paramExpr:parsed[3]||null};}function stateContext(el){var stateData=el.parent().inheritedData("$uiView");if(stateData&&stateData.state&&stateData.state.name){return stateData.state;}}$StateRefDirective.$inject=["$state","$timeout"];function $StateRefDirective($state,$timeout){var allowedOptions=["location","inherit","reload"];return{restrict:"A",require:"?^uiSrefActive",link:function(scope,element,attrs,uiSrefActive){var ref=parseStateRef(attrs.uiSref);var params=null,url=null,base=stateContext(element)||$state.$current;var isForm=element[0].nodeName==="FORM";var attr=isForm?"action":"href",nav=true;var options={relative:base};var optionsOverride=scope.$eval(attrs.uiSrefOpts)||{};angular.forEach(allowedOptions,function(option){if(option in optionsOverride){options[option]=optionsOverride[option];}});var update=function(newVal){if(newVal){params=newVal;}if(!nav){return;}var newHref=$state.href(ref.state,params,options);if(uiSrefActive){uiSrefActive.$$setStateInfo(ref.state,params);}if(!newHref){nav=false;return false;}element[0][attr]=newHref;};if(ref.paramExpr){scope.$watch(ref.paramExpr,function(newVal,oldVal){if(newVal!==params){update(newVal);}},true);params=scope.$eval(ref.paramExpr);}update();if(isForm){return;}element.bind("click",function(e){var button=e.which||e.button;if(!(button>1||e.ctrlKey||e.metaKey||e.shiftKey||element.attr("target"))){$timeout(function(){$state.go(ref.state,params,options);});e.preventDefault();}});}};}$StateActiveDirective.$inject=["$state","$stateParams","$interpolate"];function $StateActiveDirective($state,$stateParams,$interpolate){return{restrict:"A",controller:["$scope","$element","$attrs",function($scope,$element,$attrs){var state,params,activeClass;activeClass=$interpolate($attrs.uiSrefActive||"",false)($scope);this.$$setStateInfo=function(newState,newParams){state=$state.get(newState,stateContext($element));params=newParams;update();};$scope.$on("$stateChangeSuccess",update);function update(){if($state.$current.self===state&&matchesParams()){$element.addClass(activeClass);}else{$element.removeClass(activeClass);}}function matchesParams(){return !params||equalForKeys(params,$stateParams);}}]};}angular.module("ui.router.state").directive("uiSref",$StateRefDirective).directive("uiSrefActive",$StateActiveDirective);$IsStateFilter.$inject=["$state"];function $IsStateFilter($state){return function(state){return $state.is(state);};}$IncludedByStateFilter.$inject=["$state"];function $IncludedByStateFilter($state){return function(state){return $state.includes(state);};}angular.module("ui.router.state").filter("isState",$IsStateFilter).filter("includedByState",$IncludedByStateFilter);$RouteProvider.$inject=["$stateProvider","$urlRouterProvider"];function $RouteProvider($stateProvider,$urlRouterProvider){var routes=[];onEnterRoute.$inject=["$$state"];function onEnterRoute($$state){this.locals=$$state.locals.globals;this.params=this.locals.$stateParams;}function onExitRoute(){this.locals=null;this.params=null;}this.when=when;function when(url,route){if(route.redirectTo!=null){var redirect=route.redirectTo,handler;if(isString(redirect)){handler=redirect;}else{if(isFunction(redirect)){handler=function(params,$location){return redirect(params,$location.path(),$location.search());};}else{throw new Error("Invalid 'redirectTo' in when()");}}$urlRouterProvider.when(url,handler);}else{$stateProvider.state(inherit(route,{parent:null,name:"route:"+encodeURIComponent(url),url:url,onEnter:onEnterRoute,onExit:onExitRoute}));}routes.push(route);return this;}this.$get=$get;$get.$inject=["$state","$rootScope","$routeParams"];function $get($state,$rootScope,$routeParams){var $route={routes:routes,params:$routeParams,current:undefined};function stateAsRoute(state){return(state.name!=="")?state:undefined;}$rootScope.$on("$stateChangeStart",function(ev,to,toParams,from,fromParams){$rootScope.$broadcast("$routeChangeStart",stateAsRoute(to),stateAsRoute(from));});$rootScope.$on("$stateChangeSuccess",function(ev,to,toParams,from,fromParams){$route.current=stateAsRoute(to);$rootScope.$broadcast("$routeChangeSuccess",stateAsRoute(to),stateAsRoute(from));copy(toParams,$route.params);});$rootScope.$on("$stateChangeError",function(ev,to,toParams,from,fromParams,error){$rootScope.$broadcast("$routeChangeError",stateAsRoute(to),stateAsRoute(from),error);});return $route;}}angular.module("ui.router.compat").provider("$route",$RouteProvider).directive("ngView",$ViewDirective);})(window,window.angular);